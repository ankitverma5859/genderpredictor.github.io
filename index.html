<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gender Prediction</title>
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .progress {
            margin-bottom: 20px;
        }
        .progress-bar-male {
            background-color: #007bff; 
        }
        .progress-bar-female {
            background-color: #f81894;
        }
        .progress-bar-nonbinary {
            background-color: #9C59D1;
        }
        .progress-label {
            margin-bottom: 5px;
            margin-right: 10px;
            font-weight: bold;
        }
        .divider {
            border-bottom: 1px solid #ccc;
            margin-top: 20px;
            margin-bottom: 20px;
            text-align: center;
        }
        .prediction {
            text-align: left;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-center mt-5">Gender Prediction</h1>
        <div class="form-group mt-5 font-weight-bold" style="font-size: 20px;">
            <label for="text-input">Enter Text</label>

            <textarea type="text" id="text-input" rows="4" class="form-control" placeholder="Enter text..."></textarea>
            
        </div>

        <div class="form-group mt-3">
            <label for="preselected-text">Select Predefined Text</label>
            <select id="preselected-text" class="form-control" onchange="updateTextInput()">
                <option value="">Select an option</option>
                <option value="You absolutely can be! My assigned gender at birth is male, but I never cared about presenting myself as masculine to others. In fact, I try to gravitate to a more neutral position on the gender spectrum. That being said, there are days where I do feel more masculine or feminine and my presentation will vary based on that. So to answer your question, the decision is ultimately up to you whether you choose to use non-binary as an identifier, but know that you could definitely fit under the term should you choose to use it ðŸ˜Š">You absolutely can be! My assigned gender at birth is male, but I never cared about presenting myself as masculine to others ...</option>
                <option value="Damn you might want to get your anger and insecurity in check, dude.  You're attracted to your girl, right? If yes, can you blame other men for being attracted?  Unless a guy is a threat, or being outright disrespectful to me or my wife, I don't give a damn about looking.">Damn you might want to get your anger and insecurity in check, dude.  You're attracted to your girl, right? If yes, ...</option>
                <option value="No, most often I find the self proclaimed nice guys are the biggest red flag.  'Bad boys' can be problematic in other ways (and occasionally similar ways)"> No, most often I find the self proclaimed nice guys are the biggest red flag ...</option>
            </select>
        </div>
        <button id="submit-btn" class="btn btn-primary">Submit</button>
        
        <div class="divider">
            <div class="row">
                <div class="col prediction font-weight-bold" style="font-size:20px;">
                    Prediction
                </div>
            </div>
        </div>
        
        <div class="row mt-3">
            <div class="col">
                <div class="row">
                    <div class="col-1">
                        <div class="progress-label">Male</div>
                    </div>
                    <div class="col-11">
                        <div class="progress" style="height: 30px;">
                            <div class="progress-bar progress-bar-male" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col">
                <div class="row">
                    <div class="col-1">
                        <div class="progress-label">Female</div>
                    </div>
                    <div class="col-11">
                        <div class="progress" style="height: 30px;">
                            <div class="progress-bar progress-bar-female" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col">
                <div class="row">
                    <div class="col-1">
                        <div class="progress-label">Nonbinary</div>
                    </div>
                    <div class="col-11">
                        <div class="progress" style="height: 30px;">
                            <div class="progress-bar progress-bar-nonbinary" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Bootstrap JS and jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
        document.getElementById('submit-btn').addEventListener('click', function () {
            var text = document.getElementById('text-input').value;
            
            // Make REST request
            fetch('https://62e8-2406-7400-56-f20-80c0-a830-8cff-66de.ngrok-free.app/predict', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ text: text }),
            })
            .then(response => response.json())
            .then(data => {
                // Update progress bars
                var maleProgress = data.male;
                var femaleProgress = data.female;
                var nonbinaryProgress = data.nonbinary;
                updateProgressBars(maleProgress, femaleProgress, nonbinaryProgress);
            })
            .catch(error => {
                console.error('Error:', error);
            });
        });

        function updateProgressBars(maleProgress, femaleProgress, nonbinaryProgress) {
            $('.container .progress-bar-male').css('width', maleProgress + '%').attr('aria-valuenow', maleProgress).text(maleProgress.toFixed(2) + '%');
            $('.container .progress-bar-female').css('width', femaleProgress + '%').attr('aria-valuenow', femaleProgress).text(femaleProgress.toFixed(2) + '%');
            $('.container .progress-bar-nonbinary').css('width', nonbinaryProgress + '%').attr('aria-valuenow', nonbinaryProgress).text(nonbinaryProgress.toFixed(2) + '%');
        }

        function updateTextInput() {
            var selectedText = document.getElementById('preselected-text').value;
            document.getElementById('text-input').value = selectedText;
        }
    </script>
</body>
</html>
